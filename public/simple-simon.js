// (function(){
"use strict";
console.log('JS linked');


// Object of the game
// player clicks start to generate random order of colors
// colors need to fade out in on time out fade out
// player then needs to click the color generated in order of the random display in order to continue

var sequence = ["#red", "#blue", "#green", "#yellow"];
var usedSequence = [];
var clickIndex = 0;
var round = 0; 
  
function randomSequence () {
	var random = Math.floor(Math.random() * sequence.length);
	return sequence[random];
};
// Worked on function to flash the used sequence
function flashUsedSequence () {
	usedSequence.forEach(function(element, index) {
		setTimeout(function() {
			if(index === usedSequence.length -1) {
			}
				$(element).animate({
					opacity: "1"
				}, 800).animate({
					opacity: "0.5"
				}, 200)
			console.log(index);
		}, index * 1000);
	})
}
	
// Functions for playing game 
function startSequence() {
	clickIndex = 0;
	var randomColor = randomSequence();
	usedSequence.push(randomColor);    // push random color generated to usedSequence array 
	// $(randomColor).animate({   // I was having trouble with the used sequence flashing, and found that it was because I was trying to animate in two different places.
	// 	opacity: "1"
	// }, 800).animate({
	// 	opacity: "0.5"
	// }, 200)
	flashUsedSequence();
}
// Function to compare player click to color generated by the startSequence function. 
$('.box').click(function() {   // add click to buttons
	var clickId = "#" + this.id;
 	console.log(clickId);
	if(clickId === usedSequence[clickIndex]) {
		    clickIndex += 1;
		if(clickIndex == usedSequence.length) {
			clickIndex = 0;
			round++; 	// if the player click matches the random generated number the Round will increase. 		
			$('#round').html('Round: ' + round);
			setTimeout(function() {
				startSequence(); 
				// flashUsedSequence();
			}, 1000);
		} 
	} else {
		location.reload();   // when matches are not made alert and reload page to start new game
		alert('Game Over!');
	}
});
// event listeners for clicks 
$('#start').click(function() { 
	usedSequence = [];
	round = 0;
	startSequence();
});

$('#red').click(function() {
	$('#red').animate({
		opacity: "1"
	},200).animate({
		opacity: "0.5"
	},800)
});

$('#blue').click(function() {
	$('#blue').animate({
		opacity: "1"
	},200).animate({
		opacity: "0.5"
	},800)
});

$('#green').click(function() {
	$('#green').animate({
		opacity: "1"
	},200).animate({
		opacity: "0.5"
	},800)
});

$('#yellow').click(function() {
	$('#yellow').animate({
		opacity: "1"
	},200).animate({
		opacity: "0.5"
	},800)
});

// })();			